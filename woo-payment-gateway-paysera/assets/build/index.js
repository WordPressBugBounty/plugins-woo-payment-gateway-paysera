!function(){var e,t={855:function(e,t,n){"use strict";var r=window.wp.element,a=window.wp.i18n,o=window.wp.components,c=window.wc.blocksCheckout,l=n(184),s=n.n(l);const i=e=>{let{label:t,value:n,options:a,onChange:l,errorMessage:i}=e;const u=(0,r.useRef)(null);return(0,r.createElement)("div",{ref:u,className:s()("wc-block-components-combobox","paysera-combobox",{"is-active":n})},(0,r.createElement)(o.ComboboxControl,{className:"wc-block-components-combobox-control",label:t,value:n,options:a,onChange:e=>{var t;const n=null!==(t=u.current?.getElementsByTagName("input"))&&void 0!==t?t:[];n.length>0&&n[0].blur(),l(e)},allowReset:!1,autoComplete:"off"}),i&&(0,r.createElement)(c.ValidationInputError,{errorMessage:i}))};var u=window.wp.apiFetch,p=n.n(u);const d=()=>{const e=window?.wcPaysera?.base||"";return{house_no_get:e+"/delivery/get-house-no",house_no_set:e+"/delivery/set-house-no"}};var m=e=>{let{label:t,image:n,id:a}=e;return(0,r.createElement)("div",{className:"wc-block-components-radio-control__option-layout"},(0,r.createElement)("div",{className:"wc-block-components-radio-control__label-group"},t&&(0,r.createElement)("span",{id:a&&`${a}__label`,className:"wc-block-components-radio-control__label"},t),n&&(0,r.createElement)("span",{id:a&&`${a}__secondary-label`,className:"wc-block-components-radio-control__secondary-label"},(0,r.createElement)("img",{src:n,alt:t}))))},h=e=>{let{checked:t,name:n,onChange:a,option:o,disabled:c=!1}=e;const{value:l,label:i,description:u,secondaryLabel:p,secondaryDescription:d}=o;return(0,r.createElement)("label",{className:s()("wc-block-components-radio-control__option",{"wc-block-components-radio-control__option-checked":t}),htmlFor:`${n}-${l}`},(0,r.createElement)("input",{id:`${n}-${l}`,className:"wc-block-components-radio-control__input",type:"radio",name:n,value:l,onChange:e=>a(e.target.value),checked:t,"aria-describedby":s()({[`${n}-${l}__label`]:i,[`${n}-${l}__secondary-label`]:p,[`${n}-${l}__description`]:u,[`${n}-${l}__secondary-description`]:d}),style:{display:"block"},disabled:c}),(0,r.createElement)(m,{id:`${n}-${l}`,label:i,image:o.image}))};const y=e=>{let{onChange:t,radioControlId:n,className:a="",selected:o="",options:c=[],isGrid:l=!1,disabled:i=!1}=e;return c.length?(0,r.createElement)("div",{className:s()("wc-block-components-radio-control",l?"grid":"list","paysera-radio-control",a)},c.map((e=>(0,r.createElement)(h,{key:`${n}-${e.value}`,name:`radio-control-${n}`,checked:e.value===o,option:e,onChange:n=>{t(n),"function"==typeof e.onChange&&e.onChange(n)},isGrid:l,disabled:i})))):null};var f=window.React,b=n.n(f);const{registerPaymentMethod:g}=wc.wcBlocksRegistry,w=window?.wcPaysera?.paymentSettings?.title||(0,a.__)("All popular payment methods","paysera"),v=window?.wcPaysera?.paymentSettings?.logo||"",_={name:"paysera",content:(0,r.createElement)((e=>{let{eventRegistration:t,emitResponse:n,billing:o}=e;const c=window?.wcPaysera?.paymentSettings,l=c.isListOfPaymentsEnabled,[s,u]=(0,r.useState)(""),[d,m]=(0,r.useState)(null),[h,f]=(0,r.useState)([]),[b,g]=(0,r.useState)([]);return((e,t,n)=>{const[a,o]=(0,r.useState)(!1),{onPaymentSetup:c}=e;(0,r.useEffect)((()=>{const e=c((async()=>({type:t.responseTypes.SUCCESS,meta:{paymentMethodData:{pay_type:n}}})));return()=>{e()}}),[t.responseTypes.ERROR,t.responseTypes.SUCCESS,c,n]);const{onCheckoutValidation:l}=e;(0,r.useEffect)((()=>{const e=l((async()=>{o(!0);try{const e=(()=>{const e=window?.wcPaysera?.base||"";return{countries:e+"/delivery/countries",cities:e+"/delivery/terminal-cities",locations:e+"/delivery/terminal-locations",locations_set:e+"/delivery/set-terminal-location",validation:e+"/delivery/validation"}})().validation,t=await p()({path:e,method:"GET"});return!!t.validated||{errorMessage:t.messages.join("; ")}}catch(e){console.error(e)}return o(!1),!1}));return()=>{e()}}),[l])})(t,n,s),(0,r.useEffect)((()=>{l&&(async()=>{const e=await(async()=>await p()({path:(window?.wcPaysera?.base||"")+"/payment/countries",method:"GET"}).then((e=>e)).catch((e=>(console.error(e),[]))))();f(e)})()}),[]),(0,r.useEffect)((()=>{(e=>{const t=h.find((t=>t.code===e));t?(u(""),m(t.code)):m("other")})(o.billingAddress.country?.toLowerCase())}),[o?.billingAddress?.country,h]),(0,r.useEffect)((()=>{var e;g(null!==(e=h.find((e=>e.code===d))?.groups)&&void 0!==e?e:[])}),[d,h]),(0,r.createElement)("div",null,!b.length&&(0,r.createElement)("p",null,c?.description||(0,a.__)("Please select Paysera payment method to proceed with the payment in the next step.","paysera")),(0,r.createElement)(r.Fragment,null,(0,r.createElement)(i,{label:(0,a.__)("Please select the country","paysera"),value:d,options:(w=null!=h?h:[],w.map((e=>({label:e.title,value:e.code})))),onChange:e=>{u(""),m(e)}}),b.length?b.map((e=>{return(0,r.createElement)("div",null,(0,r.createElement)("label",{className:"paysera-payment-group-label"},e.title),(0,r.createElement)(y,{radioControlId:e.title,selected:s,onChange:e=>{u(e)},options:(t=e.methods,t.map((e=>({label:e.title,value:e.key,image:e.logo})))),isGrid:c.isGridViewEnabled}));var t})):""),!!c?.isBuyerConsentEnabled&&!!c?.buyerConsentText&&(0,r.createElement)("p",{dangerouslySetInnerHTML:{__html:c.buyerConsentText}}));var w}),null),edit:(0,r.createElement)((()=>(0,r.createElement)("div",null,(0,r.createElement)("p",null,(0,a.__)("Please select Paysera payment method to proceed with the payment in the next step.","paysera")))),null),canMakePayment:()=>!0,paymentMethodId:"paysera",supports:{features:["products"]},label:(0,r.createElement)((e=>{let{labelText:t,logoPath:n}=e;return(0,r.createElement)("div",{className:"paysera-label-container"},(0,r.createElement)("div",{className:"paysera-label-text"},t),n&&(0,r.createElement)("img",{className:"paysera-logo",src:n,alt:"logo"}))}),{labelText:w,logoPath:v}),ariaLabel:w};g(_);const E="payseraBillingHouseNo",k="payseraShippingHouseNo";const{ValidatedTextInput:S}=wc.blocksCheckout,{useState:C,useEffect:x,useCallback:P}=b(),N=e=>{let{checkoutExtensionData:t,fieldName:n}=e;const{setExtensionData:o}=t,[c,l]=C(""),s=1===parseInt(window?.wcPaysera?.isHouseNoEnabled),i=function(e,t,n){var r=this,a=(0,f.useRef)(null),o=(0,f.useRef)(0),c=(0,f.useRef)(null),l=(0,f.useRef)([]),s=(0,f.useRef)(),i=(0,f.useRef)(),u=(0,f.useRef)(e),p=(0,f.useRef)(!0);u.current=e;var d="undefined"!=typeof window,m=!t&&0!==t&&d;if("function"!=typeof e)throw new TypeError("Expected a function");t=+t||0;var h=!!(n=n||{}).leading,y=!("trailing"in n)||!!n.trailing,b="maxWait"in n,g="debounceOnServer"in n&&!!n.debounceOnServer,w=b?Math.max(+n.maxWait||0,t):null;(0,f.useEffect)((function(){return p.current=!0,function(){p.current=!1}}),[]);var v=(0,f.useMemo)((function(){var e=function(e){var t=l.current,n=s.current;return l.current=s.current=null,o.current=e,i.current=u.current.apply(n,t)},n=function(e,t){m&&cancelAnimationFrame(c.current),c.current=m?requestAnimationFrame(e):setTimeout(e,t)},f=function(e){if(!p.current)return!1;var n=e-a.current;return!a.current||n>=t||n<0||b&&e-o.current>=w},v=function(t){return c.current=null,y&&l.current?e(t):(l.current=s.current=null,i.current)},_=function e(){var r=Date.now();if(f(r))return v(r);if(p.current){var c=t-(r-a.current),l=b?Math.min(c,w-(r-o.current)):c;n(e,l)}},E=function(){if(d||g){var u=Date.now(),m=f(u);if(l.current=[].slice.call(arguments),s.current=r,a.current=u,m){if(!c.current&&p.current)return o.current=a.current,n(_,t),h?e(a.current):i.current;if(b)return n(_,t),e(a.current)}return c.current||n(_,t),i.current}};return E.cancel=function(){c.current&&(m?cancelAnimationFrame(c.current):clearTimeout(c.current)),o.current=0,l.current=a.current=s.current=c.current=null},E.isPending=function(){return!!c.current},E.flush=function(){return c.current?v(Date.now()):i.current},E}),[h,b,t,w,y,m,d,g]);return v}(P((async e=>{await(async(e,t)=>await p()({path:d().house_no_set,method:"POST",data:{field_name:e,house_no:t}}).then((e=>e)).catch((e=>{console.error(e)})))(n,e)}),[n]),500);return x((()=>{s&&(async()=>await p()({path:d().house_no_get,method:"POST"}).then((e=>e)).catch((e=>(console.error(e),{}))))().then((e=>{let t=e[n]||"",r=document.querySelector(".wc-block-checkout__use-address-for-billing input[type=checkbox]");n!==E||r.checked||(t=e[k]||""),""===t&&n===E?t=e[k]||"":""===t&&n===k&&(t=e[E]||""),l(t),i(t),o("paysera",n,t)})).catch((()=>{l(""),o("paysera",n,"")}))}),[]),s&&(0,r.createElement)(S,{id:n,type:"text",label:(0,a.__)("House Number","paysera"),value:c,onChange:e=>{l(e),i(e),o("paysera",n,e)},required:!0})},{registerCheckoutBlock:O}=wc.blocksCheckout,R=e=>({name:`paysera/${e}`,category:"woocommerce",parent:[e===E?"woocommerce/checkout-billing-address-block":"woocommerce/checkout-shipping-address-block"],attributes:{lock:{type:"object",default:{remove:!0,move:!0}}}});O({metadata:R(E),component:e=>N({...e,fieldName:E})}),O({metadata:R(k),component:e=>N({...e,fieldName:k})});var T=window.wp.data,$=JSON.parse('{"apiVersion":2,"name":"paysera/paysera-checkout-shipping-rates-validation","version":"1.0.0","title":"Paysera Checkout Shipping Rates Validation","category":"woocommerce","description":"Adds a Paysera shipping rates weight validation","supports":{"html":false,"align":false,"multiple":false,"reusable":false},"parent":["woocommerce/checkout-shipping-methods-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":true}},"text":{"type":"string","source":"html","selector":".wp-block-paysera-checkout-shipping-rates-validation","default":""}},"textdomain":"paysera"}');(0,c.registerCheckoutBlock)({metadata:$,component:()=>{const e="paysera-delivery-error",t="weight_error_message",{CART_STORE_KEY:n,VALIDATION_STORE_KEY:o}=window.wc.wcBlocksData,c=(0,f.useRef)(null),{selectShippingRate:l}=(0,T.useDispatch)(n),{setValidationErrors:s}=(0,T.useDispatch)(o),i=(0,T.select)(n).getShippingRates(),u=[],p=[];i.forEach((e=>{e.shipping_rates.filter((e=>{e.meta_data.length&&e.meta_data[0].key===t?u.push(e):p.push(e)}))})),(0,r.useEffect)((()=>{if(d()||m(),h()){const e=new MutationObserver((e=>{e.forEach((e=>{y(e)&&b()}))}));return c.current&&e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),()=>{e.disconnect()}}}),[]);const d=()=>0!==p.length,m=()=>{s({"shipping-option":{message:(0,a.__)("Cart weight is not sufficient","paysera"),hidden:!1}})},h=()=>u.length+p.length>0,y=e=>e.target.classList.value.includes("wc-block-components-shipping-rates-control"),b=()=>{const e=document.querySelectorAll(".wc-block-components-shipping-rates-control__package label.wc-block-components-radio-control__option, .wc-block-components-shipping-rates-control__package .wc-block-components-radio-control__option-layout");e.forEach((t=>{u.forEach((n=>{if(g(t,n)||1===e.length){const e=t.querySelector("input");null!==e&&(e.setAttribute("disabled","disabled"),e.checked=!1),w(t)||n.meta_data.forEach((e=>{v(e)&&t?.querySelector(".wc-block-components-radio-control__label")?.append(E(e.value))}))}}))})),_()},g=(e,t)=>!0===e?.getAttribute("for")?.includes(t.rate_id),w=t=>0!==t?.querySelectorAll("."+e).length,v=e=>e.key===t,_=()=>{let e=u.find((e=>!0===e.selected));void 0!==e&&(e.selected=!1,l(p[0]?.rate_id))},E=t=>{let n=document.createElement("div");return n.textContent=t,n.classList.add(e),n};return(0,r.createElement)("span",{ref:c})}})},184:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var c=a.apply(null,n);c&&e.push(c)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var l in n)r.call(n,l)&&n[l]&&e.push(l)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=function(t,n,a,o){if(!n){var c=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],o=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&o||c>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[s])}))?n.splice(s--,1):(l=!1,o<c&&(c=o));if(l){e.splice(u--,1);var i=a();void 0!==i&&(t=i)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,a,o]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,c=n[0],l=n[1],s=n[2],i=0;if(c.some((function(t){return 0!==e[t]}))){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(s)var u=s(r)}for(t&&t(n);i<c.length;i++)o=c[i],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},n=self.webpackChunkwoo_payment_gateway_paysera=self.webpackChunkwoo_payment_gateway_paysera||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=r.O(void 0,[431],(function(){return r(855)}));a=r.O(a)}();